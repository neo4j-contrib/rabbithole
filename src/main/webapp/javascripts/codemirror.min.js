window.CodeMirror=function(){function a(d,e){function ic(a){if(f.onDragEvent&&f.onDragEvent(mc,V(a)))return;Y(a)}function lc(a){return a>=0&&a<Gb.size}function nc(a){return P(Gb,a)}function oc(a,b){Wb=true;var c=b-a.height;for(var d=a;d;d=d.parent)d.height+=c}function pc(a,b){if(!a.styles)a.highlight(Fb,a.stateAfter=fe(Q(a)),f.tabSize);return a.getContent(f.tabSize,b,f.lineWrapping)}function qc(a){var b={line:0,ch:0};Ic(b,{line:Gb.size-1,ch:nc(Gb.size-1).text.length},xb(a),b,b);Rb=true}function rc(a){var b=[];Gb.iter(0,Gb.size,function(a){b.push(a.text)});return b.join(a||"\n")}function sc(a){if(D.scrollTop!=Nb){Nb=Ab.scrollTop=D.scrollTop;ed([])}}function tc(a){if(f.fixedGutter&&gb.style.left!=Ab.scrollLeft+"px")gb.style.left=Ab.scrollLeft+"px";if(Ab.scrollTop!=Nb){Nb=Ab.scrollTop;if(D.scrollTop!=Nb)D.scrollTop=Nb;ed([])}if(f.onScroll)f.onScroll(mc)}function uc(a){function h(b){if(s)Ab.draggable=false;Ob=false;k();l();if(Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10){W(b);nd(c.line,c.ch,true);$c()}}function q(a){if(e=="single"){kd(c,a)}else if(e=="double"){var b=ud(a);if(ob(a,m))kd(b.from,p);else kd(m,b.to)}else if(e=="triple"){if(ob(a,m))kd(p,pd({line:a.line,ch:0}));else kd(m,pd({line:a.line+1,ch:0}))}}function r(a){var b=$d(a,true);if(b&&!nb(b,i)){if(!Ib)Gc();i=b;q(b);Rb=false;var c=dd();if(b.line>=c.to||b.line<c.from)j=setTimeout(me(function(){r(a)}),150)}}function t(a){clearTimeout(j);var b=$d(a);if(b)q(b);W(a);$c();Rb=true;u();k()}jd(_(a,"shiftKey"));for(var b=Z(a);b!=Bb;b=b.parentNode)if(b.parentNode==tb&&b!=jb)return;for(var b=Z(a);b!=Bb;b=b.parentNode)if(b.parentNode==eb){if(f.onGutterClick)f.onGutterClick(mc,vb(eb.childNodes,b)+Zb,a);return W(a)}var c=$d(a);switch($(a)){case 3:if(n)ae(a);return;case 2:if(c)nd(c.line,c.ch,true);setTimeout($c,20);W(a);return}if(!c){if(Z(a)==Ab)W(a);return}if(!Ib)Gc();var d=+(new Date),e="single";if(Mb&&Mb.time>d-400&&nb(Mb.pos,c)){e="triple";W(a);setTimeout($c,20);vd(c.line)}else if(Lb&&Lb.time>d-400&&nb(Lb.pos,c)){e="double";Mb={time:d,pos:c};W(a);var g=ud(c);kd(g.from,g.to)}else{Lb={time:d,pos:c}}var i=c,j;if(f.dragDrop&&db&&!f.readOnly&&!nb(Jb.from,Jb.to)&&!ob(c,Jb.from)&&!ob(Jb.to,c)&&e=="single"){if(s)Ab.draggable=true;var k=ab(document,"mouseup",me(h),true);var l=ab(Ab,"drop",me(h),true);Ob=true;if(Ab.dragDrop)Ab.dragDrop();return}W(a);if(e=="single")nd(c.line,c.ch,true);var m=Jb.from,p=Jb.to;var u=ab(document,"mousemove",me(function(a){clearTimeout(j);W(a);if(!o&&!$(a))t(a);else r(a)}),true);var k=ab(document,"mouseup",me(t),true)}function vc(a){for(var b=Z(a);b!=Bb;b=b.parentNode)if(b.parentNode==eb)return W(a);W(a)}function wc(a){if(f.onDragEvent&&f.onDragEvent(mc,V(a)))return;W(a);var b=$d(a,true),c=a.dataTransfer.files;if(!b||f.readOnly)return;if(c&&c.length&&window.FileReader&&window.File){var d=c.length,e=Array(d),g=0;var h=function(a,c){var f=new FileReader;f.onload=function(){e[c]=f.result;if(++g==d){b=pd(b);me(function(){var a=Qc(e.join(""),b,b);kd(b,a)})()}};f.readAsText(a)};for(var i=0;i<d;++i)h(c[i],i)}else{if(Ob&&!(ob(b,Jb.from)||ob(Jb.to,b)))return;try{var e=a.dataTransfer.getData("Text");if(e){ne(function(){var a=Jb.from,c=Jb.to;kd(b,b);if(Ob)Qc("",a,c);Rc(e);$c()})}}catch(a){}}}function xc(a){var b=Uc();a.dataTransfer.setData("Text",b);if(a.dataTransfer.setDragImage)a.dataTransfer.setDragImage(qb("img"),0,0)}function yc(a,b){if(typeof a=="string"){a=i[a];if(!a)return false}var c=Kb;try{if(f.readOnly)Qb=true;if(b)Kb=null;a(mc)}catch(d){if(d!=cb)throw d;return false}finally{Kb=c;Qb=false}return true}function Ac(a){function j(){i=true}var b=k(f.keyMap),d=b.auto;clearTimeout(zc);if(d&&!m(a))zc=setTimeout(function(){if(k(f.keyMap)==b){f.keyMap=d.call?d.call(null,mc):d}},50);var e=zb[_(a,"keyCode")],g=false;var h=u&&c;if(e==null||a.altGraphKey)return false;if(_(a,"altKey"))e="Alt-"+e;if(_(a,h?"metaKey":"ctrlKey"))e="Ctrl-"+e;if(_(a,h?"ctrlKey":"metaKey"))e="Cmd-"+e;var i=false;if(_(a,"shiftKey")){g=l("Shift-"+e,f.extraKeys,f.keyMap,function(a){return yc(a,true)},j)||l(e,f.extraKeys,f.keyMap,function(a){if(typeof a=="string"&&/^go[A-Z]/.test(a))return yc(a)},j)}else{g=l(e,f.extraKeys,f.keyMap,yc,j)}if(i)g=false;if(g){W(a);be();if(o){a.oldKeyCode=a.keyCode;a.keyCode=0}}return g}function Bc(a,b){var c=l("'"+b+"'",f.extraKeys,f.keyMap,function(a){return yc(a,true)});if(c){W(a);be()}return c}function Dc(a){if(!Ib)Gc();if(o&&a.keyCode==27){a.returnValue=false}if(ec){if(Yc())ec=false}if(f.onKeyEvent&&f.onKeyEvent(mc,V(a)))return;var b=_(a,"keyCode");jd(b==16||_(a,"shiftKey"));var d=Ac(a);if(u){Cc=d?b:null;if(!d&&b==88&&_(a,c?"metaKey":"ctrlKey"))Rc("")}}function Ec(a){if(ec)Yc();if(f.onKeyEvent&&f.onKeyEvent(mc,V(a)))return;var b=_(a,"keyCode"),c=_(a,"charCode");if(u&&b==Cc){Cc=null;W(a);return}if((u&&(!a.which||a.which<10)||w)&&Ac(a))return;var d=String.fromCharCode(c==null?b:c);if(f.electricChars&&Fb.electricChars&&f.smartIndent&&!f.readOnly){if(Fb.electricChars.indexOf(d)>-1)setTimeout(me(function(){xd(Jb.to.line,"smart")}),75)}if(Bc(a,d))return;Wc()}function Fc(a){if(f.onKeyEvent&&f.onKeyEvent(mc,V(a)))return;if(_(a,"keyCode")==16)Kb=null}function Gc(){if(f.readOnly=="nocursor")return;if(!Ib){if(f.onFocus)f.onFocus(mc);Ib=true;if(Ab.className.search(/\bCodeMirror-focused\b/)==-1)Ab.className+=" CodeMirror-focused"}Vc();be()}function Hc(){if(Ib){if(f.onBlur)f.onBlur(mc);Ib=false;if(ac)me(function(){if(ac){ac();ac=null}})();Ab.className=Ab.className.replace(" CodeMirror-focused","")}clearInterval(Eb);setTimeout(function(){if(!Ib)Kb=null},150)}function Ic(a,b,c,d,e){if(Qb)return;var g=[];Gb.iter(a.line,b.line+1,function(a){g.push(I(a.text,a.markedSpans))});if(gc){gc.addChange(a.line,c.length,g);while(gc.done.length>f.undoDepth)gc.done.shift()}var h=F(H(g[0]),H(lb(g)),a.ch,b.ch,c);Mc(a,b,h,d,e)}function Jc(a,b){if(!a.length)return;var c=a.pop(),d=[];for(var e=c.length-1;e>=0;e-=1){var f=c[e];var g=[],h=f.start+f.added;Gb.iter(f.start,h,function(a){g.push(I(a.text,a.markedSpans))});d.push({start:f.start,added:f.old.length,old:g});var i={line:f.start+f.old.length-1,ch:ub(G(lb(g)),G(lb(f.old)))};Mc({line:f.start,ch:0},{line:h-1,ch:nc(h-1).text.length},f.old,i,i)}Rb=true;b.push(d)}function Kc(){Jc(gc.done,gc.undone)}function Lc(){Jc(gc.undone,gc.done)}function Mc(a,b,c,d,e){function u(a){return a<=Math.min(b.line,b.line+r)?a:a+r}if(Qb)return;var g=false,h=bc.text.length;if(!f.lineWrapping)Gb.iter(a.line,b.line+1,function(a){if(!a.hidden&&a.text.length==h){g=true;return true}});if(a.line!=b.line||c.length>1)Wb=true;var i=b.line-a.line,j=nc(a.line),k=nc(b.line);var l=lb(c);if(a.ch==0&&b.ch==0&&G(l)==""){var m=[],n=null;for(var o=0,p=c.length-1;o<p;++o)m.push(new M(G(c[o]),H(c[o])));k.update(k.text,H(l));if(i)Gb.remove(a.line,i,Xb);if(m.length)Gb.insert(a.line,m)}else if(j==k){if(c.length==1){j.update(j.text.slice(0,a.ch)+G(c[0])+j.text.slice(b.ch),H(c[0]))}else{for(var m=[],o=1,p=c.length-1;o<p;++o)m.push(new M(G(c[o]),H(c[o])));m.push(new M(G(l)+j.text.slice(b.ch),H(l)));j.update(j.text.slice(0,a.ch)+G(c[0]),H(c[0]));Gb.insert(a.line+1,m)}}else if(c.length==1){j.update(j.text.slice(0,a.ch)+G(c[0])+k.text.slice(b.ch),H(c[0]));Gb.remove(a.line+1,i,Xb)}else{var m=[];j.update(j.text.slice(0,a.ch)+G(c[0]),H(c[0]));k.update(G(l)+k.text.slice(b.ch),H(l));for(var o=1,p=c.length-1;o<p;++o)m.push(new M(G(c[o]),H(c[o])));if(i>1)Gb.remove(a.line+1,i-1,Xb);Gb.insert(a.line+1,m)}if(f.lineWrapping){var q=Math.max(5,Ab.clientWidth/Xd()-3);Gb.iter(a.line,a.line+c.length,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/q)||1;if(b!=a.height)oc(a,b)})}else{Gb.iter(a.line,a.line+c.length,function(a){var b=a.text;if(!a.hidden&&b.length>h){bc=a;h=b.length;dc=true;g=false}});if(g)cc=true}Hb=Math.min(Hb,a.line);he(400);var r=c.length-i-1;Tb.push({from:a.line,to:b.line+1,diff:r});if(f.onChange){for(var o=0;o<c.length;++o)if(typeof c[o]!="string")c[o]=c[o].text;var s={from:a,to:b,text:c};if(Ub){for(var t=Ub;t.next;t=t.next){}t.next=s}else Ub=s}ld(pd(d),pd(e),u(Jb.from.line),u(Jb.to.line))}function Nc(){var a=Gb.height*Ud()+2*Yd();return a*.99>Ab.offsetHeight?a:false}function Oc(a){var b=Nc();D.style.display=b?"block":"none";if(b){B.style.height=tb.style.minHeight=b+"px";D.style.height=Ab.clientHeight+"px";if(a!=null){D.scrollTop=Ab.scrollTop=a;if(s)setTimeout(function(){if(D.scrollTop!=a)return;D.scrollTop=a+(a?-1:1);D.scrollTop=a},0)}}else{tb.style.minHeight=""}jb.style.top=Yb*Ud()+"px"}function Pc(){bc=nc(0);dc=true;var a=bc.text.length;Gb.iter(1,Gb.size,function(b){var c=b.text;if(!b.hidden&&c.length>a){a=c.length;bc=b}});cc=false}function Qc(a,b,c){function d(d){if(ob(d,b))return d;if(!ob(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1;var g=d.ch;if(d.line==c.line)g+=lb(a).length-(c.ch-(c.line==b.line?b.ch:0));return{line:f,ch:g}}b=pd(b);if(!c)c=b;else c=pd(c);a=xb(a);var e;Sc(a,b,c,function(a){e=a;return{from:d(Jb.from),to:d(Jb.to)}});return e}function Rc(a,b){Sc(xb(a),Jb.from,Jb.to,function(a){if(b=="end")return{from:a,to:a};else if(b=="start")return{from:Jb.from,to:Jb.from};else return{from:Jb.from,to:a}})}function Sc(a,b,c,d){var e=a.length==1?a[0].length+b.ch:lb(a).length;var f=d({line:b.line+a.length-1,ch:e});Ic(b,c,a,f.from,f.to)}function Tc(a,b,c){var d=a.line,e=b.line;if(d==e)return nc(d).text.slice(a.ch,b.ch);var f=[nc(d).text.slice(a.ch)];Gb.iter(d+1,e,function(a){f.push(a.text)});f.push(nc(e).text.slice(0,b.ch));return f.join(c||"\n")}function Uc(a){return Tc(Jb.from,Jb.to,a)}function Vc(){if(ec)return;Cb.set(f.pollInterval,function(){Yc();if(Ib)Vc()})}function Wc(){function b(){var c=Yc();if(!c&&!a){a=true;Cb.set(60,b)}else{ec=false;Vc()}}var a=false;ec=true;Cb.set(20,b)}function Yc(){if(!Ib||yb(v)||f.readOnly)return false;var a=v.value;if(a==Xc)return false;if(!le)je();Kb=null;var b=0,c=Math.min(Xc.length,a.length);while(b<c&&Xc[b]==a[b])++b;if(b<Xc.length)Jb.from={line:Jb.from.line,ch:Jb.from.ch-(Xc.length-b)};else if(Pb&&nb(Jb.from,Jb.to))Jb.to={line:Jb.to.line,ch:Math.min(nc(Jb.to.line).text.length,Jb.to.ch+(a.length-b))};Rc(a.slice(b),"end");if(a.length>1e3){v.value=Xc=""}else Xc=a;if(!le)ke();return true}function Zc(a){if(!nb(Jb.from,Jb.to)){Xc="";v.value=Uc();if(Ib)mb(v)}else if(a)Xc=v.value=""}function $c(){if(f.readOnly!="nocursor")v.focus()}function _c(){var a=ad();bd(a.x,a.y,a.x,a.yBot);if(!Ib)return;var b=tb.getBoundingClientRect(),c=null;if(a.y+b.top<0)c=true;else if(a.y+b.top+Ud()>(window.innerHeight||document.documentElement.clientHeight))c=false;if(c!=null){var d=K.style.display=="none";if(d){K.style.display="";K.style.left=a.x+"px";K.style.top=a.y-Yb+"px"}K.scrollIntoView(c);if(d)K.style.display="none"}}function ad(){var a=Od(Jb.inverted?Jb.from:Jb.to);var b=f.lineWrapping?Math.min(a.x,X.offsetWidth):a.x;return{x:b,y:a.y,yBot:a.yBot}}function bd(a,b,c,d){var e=cd(a,b,c,d);if(e.scrollLeft!=null){Ab.scrollLeft=e.scrollLeft}if(e.scrollTop!=null){D.scrollTop=Ab.scrollTop=e.scrollTop}}function cd(a,b,c,d){var e=Zd(),g=Yd();b+=g;d+=g;a+=e;c+=e;var h=Ab.clientHeight,i=D.scrollTop,j={};var k=Nc()||Infinity;var l=b<g+10,m=d+g>k-10;if(b<i)j.scrollTop=l?0:Math.max(0,b);else if(d>i+h)j.scrollTop=(m?k:d)-h;var n=Ab.clientWidth,o=Ab.scrollLeft;var p=f.fixedGutter?gb.clientWidth:0;var q=a<p+e+10;if(a<o+p||q){if(q)a=0;j.scrollLeft=Math.max(0,a-10-p)}else if(c>n+o-3){j.scrollLeft=c+10-n}return j}function dd(a){var b=Ud(),c=(a!=null?a:D.scrollTop)-Yd();var d=Math.max(0,Math.floor(c/b));var e=Math.ceil((c+Ab.clientHeight)/b);return{from:R(Gb,d),to:R(Gb,e)}}function ed(a,b,c){function o(){var a=E.firstChild,b=false;Gb.iter(Zb,$b,function(c){if(!a)return;if(!c.hidden){var d=Math.round(a.offsetHeight/l)||1;if(c.height!=d){oc(c,d);Wb=b=true}}a=a.nextSibling});return b}if(!Ab.clientWidth){Zb=$b=Yb=0;return}var d=dd(c);if(a!==true&&a.length==0&&d.from>Zb&&d.to<$b){Oc(c);return}var e=Math.max(d.from-100,0),g=Math.min(Gb.size,d.to+100);if(Zb<e&&e-Zb<20)e=Zb;if($b>g&&$b-g<20)g=Math.min(Gb.size,$b);var h=a===true?[]:fd([{from:Zb,to:$b,domStart:0}],a);var i=0;for(var j=0;j<h.length;++j){var k=h[j];if(k.from<e){k.domStart+=e-k.from;k.from=e}if(k.to>g)k.to=g;if(k.from>=k.to)h.splice(j--,1);else i+=k.to-k.from}if(i==g-e&&e==Zb&&g==$b){Oc(c);return}h.sort(function(a,b){return a.domStart-b.domStart});var l=Ud(),m=gb.style.display;E.style.display="none";gd(e,g,h);E.style.display=gb.style.display="";var n=e!=Zb||g!=$b||_b!=Ab.clientHeight+l;if(n)_b=Ab.clientHeight+l;if(e!=Zb||g!=$b&&f.onViewportChange)setTimeout(function(){if(f.onViewportChange)f.onViewportChange(mc,e,g)});Zb=e;$b=g;Yb=S(Gb,e);he(100);if(E.childNodes.length!=$b-Zb)throw new Error("BAD PATCH! "+JSON.stringify(h)+" size="+($b-Zb)+" nodes="+E.childNodes.length);if(f.lineWrapping)o();gb.style.display=m;if(n||Wb){hd()&&f.lineWrapping&&o()&&hd()}Oc(c);id();if(!b&&f.onUpdate)f.onUpdate(mc);return true}function fd(a,b){for(var c=0,d=b.length||0;c<d;++c){var e=b[c],f=[],g=e.diff||0;for(var h=0,i=a.length;h<i;++h){var j=a[h];if(e.to<=j.from&&e.diff)f.push({from:j.from+g,to:j.to+g,domStart:j.domStart});else if(e.to<=j.from||e.from>=j.to)f.push(j);else{if(e.from>j.from)f.push({from:j.from,to:e.from,domStart:j.domStart});if(e.to<j.to)f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)})}}a=f}return a}function gd(a,b,c){function d(a){var b=a.nextSibling;a.parentNode.removeChild(a);return b}if(!c.length)rb(E);else{var e=0,f=E.firstChild,g;for(var h=0;h<c.length;++h){var i=c[h];while(i.domStart>e){f=d(f);e++}for(var j=0,k=i.to-i.from;j<k;++j){f=f.nextSibling;e++}}while(f)f=d(f)}var l=c.shift(),f=E.firstChild,j=a;Gb.iter(a,b,function(a){if(l&&l.to==j)l=c.shift();if(!l||l.from>j){if(a.hidden)var b=qb("pre");else{var b=pc(a);if(a.className)b.className=a.className;if(a.bgClassName){var d=qb("pre"," ",a.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");b=qb("div",[d,b],null,"position: relative")}}E.insertBefore(b,f)}else{f=f.nextSibling}++j})}function hd(){if(!f.gutter&&!f.lineNumbers)return;var a=jb.offsetHeight,b=Ab.clientHeight;gb.style.height=(a-b<2?b:a)+"px";var c=document.createDocumentFragment(),d=Zb,e;Gb.iter(Zb,Math.max($b,Zb+1),function(a){if(a.hidden){c.appendChild(qb("pre"))}else{var b=a.gutterMarker;var g=f.lineNumbers?f.lineNumberFormatter(d+f.firstLineNumber):null;if(b&&b.text)g=b.text.replace("%N%",g!=null?g:"");else if(g==null)g=" ";var h=c.appendChild(qb("pre",null,b&&b.style));h.innerHTML=g;for(var i=1;i<a.height;++i){h.appendChild(qb("br"));h.appendChild(document.createTextNode(" "))}if(!b)e=d}++d});gb.style.display="none";sb(eb,c);if(e!=null&&f.lineNumbers){var g=eb.childNodes[e-Zb];var h=String(Gb.size).length,i=ib(g.firstChild),j="";while(i.length+j.length<h)j+=" ";if(j)g.insertBefore(document.createTextNode(j),g.firstChild)}gb.style.display="";var k=Math.abs((parseInt(X.style.marginLeft)||0)-gb.offsetWidth)>2;X.style.marginLeft=gb.offsetWidth+"px";Wb=false;return k}function id(){var a=nb(Jb.from,Jb.to);var b=Od(Jb.from,true);var c=a?b:Od(Jb.to,true);var d=Jb.inverted?b:c,e=Ud();var g=hb(Bb),h=hb(E);A.style.top=Math.max(0,Math.min(Ab.offsetHeight,d.y+h.top-g.top))+"px";A.style.left=Math.max(0,Math.min(Ab.offsetWidth,d.x+h.left-g.left))+"px";if(a){K.style.top=d.y+"px";K.style.left=(f.lineWrapping?Math.min(d.x,X.offsetWidth):d.x)+"px";K.style.display="";J.style.display="none"}else{var i=b.y==c.y,j=document.createDocumentFragment();var k=X.clientWidth||X.offsetWidth;var l=X.clientHeight||X.offsetHeight;var m=function(a,b,c,d){var e=r?"width: "+(!c?k:k-c-a)+"px":"right: "+c+"px";j.appendChild(qb("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; "+e+"; height: "+d+"px"))};if(Jb.from.ch&&b.y>=0){var n=i?k-c.x:0;m(b.x,b.y,n,e)}var o=Math.max(0,b.y+(Jb.from.ch?e:0));var p=Math.min(c.y,l)-o;if(p>.2*e)m(0,o,0,p);if((!i||!Jb.from.ch)&&c.y<l-.5*e)m(0,c.y,k-c.x,e);sb(J,j);K.style.display="none";J.style.display=""}}function jd(a){if(a)Kb=Kb||(Jb.inverted?Jb.to:Jb.from);else Kb=null}function kd(a,b){var c=Kb&&pd(Kb);if(c){if(ob(c,a))a=c;else if(ob(b,c))b=c}ld(a,b);Sb=true}function ld(a,b,c,d){fc=null;if(c==null){c=Jb.from.line;d=Jb.to.line}if(nb(Jb.from,a)&&nb(Jb.to,b))return;if(ob(b,a)){var e=b;b=a;a=e}if(a.line!=c){var g=md(a,c,Jb.from.ch);if(!g)Ld(a.line,false);else a=g}if(b.line!=d)b=md(b,d,Jb.to.ch);if(nb(a,b))Jb.inverted=false;else if(nb(a,Jb.to))Jb.inverted=false;else if(nb(b,Jb.from))Jb.inverted=true;if(f.autoClearEmptyLines&&nb(Jb.from,Jb.to)){var h=Jb.inverted?a:b;if(h.line!=Jb.from.line&&Jb.from.line<Gb.size){var i=nc(Jb.from.line);if(/^\s+$/.test(i.text))setTimeout(me(function(){if(i.parent&&/^\s+$/.test(i.text)){var a=Q(i);Qc("",{line:a,ch:0},{line:a,ch:i.text.length})}},10))}}Jb.from=a;Jb.to=b;Vb=true}function md(a,b,c){function d(b){var d=a.line+b,e=b==1?Gb.size:-1;while(d!=e){var g=nc(d);if(!g.hidden){var h=a.ch;if(f||h>c||h>g.text.length)h=g.text.length;return{line:d,ch:h}}d+=b}}var e=nc(a.line);var f=a.ch==e.text.length&&a.ch!=c;if(!e.hidden)return a;if(a.line>=b)return d(1)||d(-1);else return d(-1)||d(1)}function nd(a,b,c){var d=pd({line:a,ch:b||0});(c?kd:ld)(d,d)}function od(a){return Math.max(0,Math.min(a,Gb.size-1))}function pd(a){if(a.line<0)return{line:0,ch:0};if(a.line>=Gb.size)return{line:Gb.size-1,ch:nc(Gb.size-1).text.length};var b=a.ch,c=nc(a.line).text.length;if(b==null||b>c)return{line:a.line,ch:c};else if(b<0)return{line:a.line,ch:0};else return a}function qd(a,b){function g(){for(var b=d+a,c=a<0?-1:Gb.size;b!=c;b+=a){var e=nc(b);if(!e.hidden){d=b;f=e;return true}}}function h(b){if(e==(a<0?0:f.text.length)){if(!b&&g())e=a<0?f.text.length:0;else return false}else e+=a;return true}var c=Jb.inverted?Jb.from:Jb.to,d=c.line,e=c.ch;var f=nc(d);if(b=="char")h();else if(b=="column")h(true);else if(b=="word"){var i=false;for(;;){if(a<0)if(!h())break;if(wb(f.text.charAt(e)))i=true;else if(i){if(a<0){a=1;h()}break}if(a>0)if(!h())break}}return{line:d,ch:e}}function rd(a,b){var c=a<0?Jb.from:Jb.to;if(Kb||nb(Jb.from,Jb.to))c=qd(a,b);nd(c.line,c.ch,true)}function sd(a,b){if(!nb(Jb.from,Jb.to))Qc("",Jb.from,Jb.to);else if(a<0)Qc("",qd(a,b),Jb.to);else Qc("",Jb.from,qd(a,b));Sb=true}function td(a,b){var c=0,d=Od(Jb.inverted?Jb.from:Jb.to,true);if(fc!=null)d.x=fc;if(b=="page"){var e=Math.min(Ab.clientHeight,window.innerHeight||document.documentElement.clientHeight);var f=Pd(d.x,d.y+e*a)}else if(b=="line"){var g=Ud();var f=Pd(d.x,d.y+.5*g+a*g)}if(b=="page")D.scrollTop+=Od(f,true).y-d.y;nd(f.line,f.ch,true);fc=d.x}function ud(a){var b=nc(a.line).text;var c=a.ch,d=a.ch;if(b){if(a.after===false||d==b.length)--c;else++d;var e=b.charAt(c);var f=wb(e)?wb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!wb(a)};while(c>0&&f(b.charAt(c-1)))--c;while(d<b.length&&f(b.charAt(d)))++d}return{from:{line:a.line,ch:c},to:{line:a.line,ch:d}}}function vd(a){kd({line:a,ch:0},pd({line:a+1,ch:0}))}function wd(a){if(nb(Jb.from,Jb.to))return xd(Jb.from.line,a);var b=Jb.to.line-(Jb.to.ch?0:1);for(var c=Jb.from.line;c<=b;++c)xd(c,a)}function xd(a,b){if(!b)b="add";if(b=="smart"){if(!Fb.indent)b="prev";else var c=fe(a)}var d=nc(a),e=d.indentation(f.tabSize),g=d.text.match(/^\s*/)[0],h;if(b=="smart"){h=Fb.indent(c,d.text.slice(g.length),d.text);if(h==cb)b="prev"}if(b=="prev"){if(a)h=nc(a-1).indentation(f.tabSize);else h=0}else if(b=="add")h=e+f.indentUnit;else if(b=="subtract")h=e-f.indentUnit;h=Math.max(0,h);var i=h-e;var j="",k=0;if(f.indentWithTabs)for(var l=Math.floor(h/f.tabSize);l;--l){k+=f.tabSize;j+="	"}if(k<h)j+=kb(h-k);if(j!=g)Qc(j,{line:a,ch:0},{line:a,ch:g.length})}function yd(){Fb=a.getMode(f,f.mode);Gb.iter(0,Gb.size,function(a){a.stateAfter=null});Hb=0;he(100)}function zd(){var a=f.gutter||f.lineNumbers;gb.style.display=a?"":"none";if(a)Wb=true;else E.parentNode.style.marginLeft=0}function Ad(a,b){if(f.lineWrapping){Bb.className+=" CodeMirror-wrap";var c=Ab.clientWidth/Xd()-3;Gb.iter(0,Gb.size,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/c)||1;if(b!=1)oc(a,b)});X.style.minWidth=L.style.left=""}else{Bb.className=Bb.className.replace(" CodeMirror-wrap","");Pc();Gb.iter(0,Gb.size,function(a){if(a.height!=1&&!a.hidden)oc(a,1)})}Tb.push({from:0,to:Gb.size})}function Bd(){Ab.className=Ab.className.replace(/\s*cm-s-\S+/g,"")+f.theme.replace(/(^|\s)\s*/g," cm-s-")}function Cd(){var a=j[f.keyMap].style;Bb.className=Bb.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Dd(a,b){this.lines=[];this.type=a;if(b)this.style=b}function Ed(a,b,c,d){a=pd(a);b=pd(b);var e=new Dd("range",c);if(d)for(var f in d)if(d.hasOwnProperty(f))e[f]=d[f];var g=a.line;Gb.iter(g,b.line+1,function(c){var d={from:g==a.line?a.ch:null,to:g==b.line?b.ch:null,marker:e};(c.markedSpans||(c.markedSpans=[])).push(d);e.lines.push(c);++g});Tb.push({from:a.line,to:b.line+1});return e}function Fd(a){a=pd(a);var b=new Dd("bookmark"),c=nc(a.line);var d={from:a.ch,to:a.ch,marker:b};(c.markedSpans||(c.markedSpans=[])).push(d);b.lines.push(c);return b}function Gd(a){a=pd(a);var b=[],c=nc(a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];if((e.from==null||e.from<=a.ch)&&(e.to==null||e.to>=a.ch))b.push(e.marker)}return b}function Hd(a,b,c){if(typeof a=="number")a=nc(od(a));a.gutterMarker={text:b,style:c};Wb=true;return a}function Id(a){if(typeof a=="number")a=nc(od(a));a.gutterMarker=null;Wb=true}function Jd(a,b){var c=a,d=a;if(typeof a=="number")d=nc(od(a));else c=Q(a);if(c==null)return null;if(b(d,c))Tb.push({from:c,to:c+1});else return null;return d}function Kd(a,b,c){return Jd(a,function(a){if(a.className!=b||a.bgClassName!=c){a.className=b;a.bgClassName=c;return true}})}function Ld(a,b){return Jd(a,function(a,c){if(a.hidden!=b){a.hidden=b;if(!f.lineWrapping){if(b&&a.text.length==bc.text.length){cc=true}else if(!b&&a.text.length>bc.text.length){bc=a;cc=false}}oc(a,b?0:1);var d=Jb.from.line,e=Jb.to.line;if(b&&(d==c||e==c)){var g=d==c?md({line:d,ch:0},d,0):Jb.from;var h=e==c?md({line:e,ch:0},e,0):Jb.to;if(!h)return;ld(g,h)}return Wb=true}})}function Md(a){if(typeof a=="number"){if(!lc(a))return null;var b=a;a=nc(a);if(!a)return null}else{var b=Q(a);if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}}function Nd(a,b){if(b==0)return{top:0,left:0};var c=f.lineWrapping&&b<a.text.length&&fb.test(a.text.slice(b-1,b+1));var d=pc(a,b);sb(U,d);var e=d.anchor;var g=e.offsetTop,h=e.offsetLeft;if(o&&g==0&&h==0){var i=qb("span","x");e.parentNode.insertBefore(i,e.nextSibling);g=i.offsetTop}return{top:g,left:h}}function Od(a,b){var c,d=Ud(),e=d*(S(Gb,a.line)-(b?Yb:0));if(a.ch==0)c=0;else{var g=Nd(nc(a.line),a.ch);c=g.left;if(f.lineWrapping)e+=Math.max(0,g.top)}return{x:c,y:e,yBot:e+d}}function Pd(a,b){function m(a){var b=Nd(h,a);if(j){var d=Math.round(b.top/c);l=d!=k;return Math.max(0,b.left+(d-k)*Ab.clientWidth)}return b.left}var c=Ud(),d=Xd(),e=Yb+Math.floor(b/c);if(e<0)return{line:0,ch:0};var g=R(Gb,e);if(g>=Gb.size)return{line:Gb.size-1,ch:nc(Gb.size-1).text.length};var h=nc(g),i=h.text;var j=f.lineWrapping,k=j?e-S(Gb,g):0;if(a<=0&&k==0)return{line:g,ch:0};var l=false;var n=0,o=0,p=i.length,q;var r=Math.min(p,Math.ceil((a+k*Ab.clientWidth*.9)/d));for(;;){var s=m(r);if(s<=a&&r<p)r=Math.min(p,Math.ceil(r*1.2));else{q=s;p=r;break}}if(a>q)return{line:g,ch:p};r=Math.floor(p*.8);s=m(r);if(s<a){n=r;o=s}for(;;){if(p-n<=1){var t=a-o<q-a;return{line:g,ch:t?n:p,after:t}}var u=Math.ceil((n+p)/2),v=m(u);if(v>a){p=u;q=v;if(l)q+=1e3}else{n=u;o=v}}}function Qd(a){var b=Od(a,true),c=hb(X);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function Ud(){if(Td==null){Td=qb("pre");for(var a=0;a<49;++a){Td.appendChild(document.createTextNode("x"));Td.appendChild(qb("br"))}Td.appendChild(document.createTextNode("x"))}var b=E.clientHeight;if(b==Sd)return Rd;Sd=b;sb(U,Td.cloneNode(true));Rd=U.firstChild.offsetHeight/50||1;rb(U);return Rd}function Xd(){if(Ab.clientWidth==Wd)return Vd;Wd=Ab.clientWidth;var a=qb("span","x");var b=qb("pre",[a]);sb(U,b);return Vd=a.offsetWidth||10}function Yd(){return X.offsetTop}function Zd(){return X.offsetLeft}function $d(a,b){var c=hb(Ab,true),d,e;try{d=a.clientX;e=a.clientY}catch(a){return null}if(!b&&(d-c.left>Ab.clientWidth||e-c.top>Ab.clientHeight))return null;var f=hb(X,true);return Pd(d-f.left,e-f.top)}function ae(a){function e(){A.style.position="relative";v.style.cssText=d;if(q)D.scrollTop=c;Vc();if(v.selectionStart!=null){clearTimeout(_d);var a=v.value=" "+(nb(Jb.from,Jb.to)?"":v.value),b=0;Xc=" ";v.selectionStart=1;v.selectionEnd=a.length;_d=setTimeout(function e(){if(Xc==" "&&v.selectionStart==0)me(i.selectAll)(mc);else if(b++<10)_d=setTimeout(e,500);else Zc()},200)}}var b=$d(a),c=D.scrollTop;if(!b||u)return;if(nb(Jb.from,Jb.to)||ob(b,Jb.from)||!ob(b,Jb.to))me(nd)(b.line,b.ch);var d=v.style.cssText;A.style.position="absolute";v.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";$c();Zc(true);if(nb(Jb.from,Jb.to))v.value=Xc=" ";if(n){Y(a);var f=ab(window,"mouseup",function(){f();setTimeout(e,20)},true)}else{setTimeout(e,50)}}function be(){clearInterval(Eb);var a=true;K.style.visibility="";Eb=setInterval(function(){K.style.visibility=(a=!a)?"":"hidden"},f.cursorBlinkRate)}function de(a){function p(a,b,c){if(!a.text)return;var d=a.styles,e=g?0:a.text.length-1,f;for(var i=g?0:d.length-2,j=g?d.length:-2;i!=j;i+=2*h){var k=d[i];if(d[i+1]!=m){e+=h*k.length;continue}for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,e+=h){if(e>=b&&e<c&&o.test(f=k.charAt(l))){var q=ce[f];if(q.charAt(1)==">"==g)n.push(f);else if(n.pop()!=q.charAt(0))return{pos:e,match:false};else if(!n.length)return{pos:e,match:true}}}}}var b=Jb.inverted?Jb.from:Jb.to,c=nc(b.line),d=b.ch-1;var e=d>=0&&ce[c.text.charAt(d)]||ce[c.text.charAt(++d)];if(!e)return;var f=e.charAt(0),g=e.charAt(1)==">",h=g?1:-1,i=c.styles;for(var j=d+1,k=0,l=i.length;k<l;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}var n=[c.text.charAt(d)],o=/[(){}[\]]/;for(var k=b.line,l=g?Math.min(k+100,Gb.size):Math.max(-1,k-100);k!=l;k+=h){var c=nc(k),q=k==b.line;var r=p(c,q&&g?d+1:0,q&&!g?d:c.text.length);if(r)break}if(!r)r={pos:null,match:false};var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var s=Ed({line:b.line,ch:d},{line:b.line,ch:d+1},m),t=r.pos!=null&&Ed({line:k,ch:r.pos},{line:k,ch:r.pos+1},m);var u=me(function(){s.clear();t&&t.clear()});if(a)setTimeout(u,800);else ac=u}function ee(a){var b,c;for(var d=a,e=a-40;d>e;--d){if(d==0)return 0;var g=nc(d-1);if(g.stateAfter)return d;var h=g.indentation(f.tabSize);if(c==null||b>h){c=d-1;b=h}}return c}function fe(a){var b=ee(a),c=b&&nc(b-1).stateAfter;if(!c)c=z(Fb);else c=y(Fb,c);Gb.iter(b,a,function(d){d.process(Fb,c,f.tabSize);d.stateAfter=b==a-1||b%5==0?y(Fb,c):null});return c}function ge(){if(Hb>=$b)return;var a=+(new Date)+f.workTime,b=y(Fb,fe(Hb));var c=Hb;Gb.iter(Hb,$b,function(c){if(Hb>=Zb){c.highlight(Fb,b,f.tabSize);c.stateAfter=y(Fb,b)}else{c.process(Fb,b,f.tabSize);c.stateAfter=Hb%5==0?y(Fb,b):null}++Hb;if(+(new Date)>a){he(f.workDelay);return true}});if($b>c&&Hb>=Zb)me(function(){Tb.push({from:c,to:Hb})})()}function he(a){if(Hb<$b)Db.set(a,ge)}function je(){Rb=Sb=Ub=null;Tb=[];Vb=false;Xb=[]}function ke(){if(cc)Pc();if(dc&&!f.lineWrapping){var a=L.offsetWidth,b=Nd(bc,bc.text.length).left;if(!p){L.style.left=b+"px";X.style.minWidth=b+a+"px"}dc=false}var c,d;if(Vb){var e=ad();c=cd(e.x,e.y,e.x,e.yBot)}if(Tb.length||c&&c.scrollTop!=null)d=ed(Tb,true,c&&c.scrollTop);if(!d){if(Vb)id();if(Wb)hd()}if(c)_c();if(Vb)be();if(Ib&&(Rb===true||Rb!==false&&Vb))Zc(Sb);if(Vb&&f.matchBrackets)setTimeout(me(function(){if(ac){ac();ac=null}if(nb(Jb.from,Jb.to))de(false)}),20);var g=Vb,h=Xb;if(Ub&&f.onChange&&mc)f.onChange(mc,Ub);if(g&&f.onCursorActivity)f.onCursorActivity(mc);for(var i=0;i<h.length;++i)h[i](mc);if(d&&f.onUpdate)f.onUpdate(mc)}function me(a){return function(){if(!(le++))je();try{var b=a.apply(this,arguments)}finally{if(!--le)ke()}return b}}function ne(a){gc.startCompound();try{return a()}finally{gc.endCompound()}}var f={},h=a.defaults;for(var t in h)if(h.hasOwnProperty(t))f[t]=(e&&e.hasOwnProperty(t)?e:h)[t];var v=qb("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");v.setAttribute("wrap","off");v.setAttribute("autocorrect","off");v.setAttribute("autocapitalize","off");var A=qb("div",[v],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");var B=qb("div",null,"CodeMirror-scrollbar-inner");var D=qb("div",[B],"CodeMirror-scrollbar");var E=qb("div"),J=qb("div",null,null,"position: relative; z-index: -1");var K=qb("pre"," ","CodeMirror-cursor"),L=qb("pre"," ","CodeMirror-cursor","visibility: hidden");var U=qb("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;");var X=qb("div",[U,K,L,J,E],null,"position: relative; z-index: 0");var eb=qb("div",null,"CodeMirror-gutter-text"),gb=qb("div",[eb],"CodeMirror-gutter");var jb=qb("div",[gb,qb("div",[X],"CodeMirror-lines")],null,"position: relative");var tb=qb("div",[jb],null,"position: relative");var Ab=qb("div",[tb],"CodeMirror-scroll");Ab.setAttribute("tabIndex","-1");var Bb=qb("div",[A,D,Ab],"CodeMirror"+(f.lineWrapping?" CodeMirror-wrap":""));if(d.appendChild)d.appendChild(Bb);else d(Bb);Bd();Cd();if(b)v.style.width="0px";if(!s)Ab.draggable=true;X.style.outline="none";if(f.tabindex!=null)v.tabIndex=f.tabindex;if(f.autofocus)$c();if(!f.gutter&&!f.lineNumbers)gb.style.display="none";if(w)A.style.height="1px",A.style.position="absolute";if(x){D.style.zIndex=-2;D.style.visibility="hidden"}else if(p)D.style.minWidth="18px";var Cb=new bb,Db=new bb,Eb;var Fb,Gb=new O([new N([new M("")])]),Hb=0,Ib;yd();var Jb={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var Kb,Lb,Mb,Nb=0,Ob,Pb=false,Qb=false;var Rb,Sb,Tb,Ub,Vb,Wb,Xb;var Yb=0,Zb=0,$b=0,_b=0;var ac;var bc=nc(0),cc=false,dc=true;var ec=false;var fc=null;me(function(){qc(f.value||"");Rb=false})();var gc=new T;ab(Ab,"mousedown",me(uc));ab(Ab,"dblclick",me(vc));ab(X,"selectstart",W);if(!n)ab(Ab,"contextmenu",ae);ab(Ab,"scroll",tc);ab(D,"scroll",sc);ab(D,"mousedown",function(){if(Ib)setTimeout($c,0)});var hc=ab(window,"resize",function(){if(Bb.parentNode)ed(true);else hc()},true);ab(v,"keyup",me(Fc));ab(v,"input",Wc);ab(v,"keydown",me(Dc));ab(v,"keypress",me(Ec));ab(v,"focus",Gc);ab(v,"blur",Hc);if(f.dragDrop){ab(Ab,"dragstart",xc);ab(Ab,"dragenter",ic);ab(Ab,"dragover",ic);ab(Ab,"drop",me(wc))}ab(Ab,"paste",function(){$c();Wc()});ab(v,"paste",Wc);ab(v,"cut",me(function(){if(!f.readOnly)Rc("")}));if(w)ab(tb,"mouseup",function(){if(document.activeElement==v)v.blur();$c()});var jc;try{jc=document.activeElement==v}catch(kc){}if(jc||f.autofocus)setTimeout(Gc,20);else Hc();var mc=Bb.CodeMirror={getValue:rc,setValue:me(qc),getSelection:Uc,replaceSelection:me(Rc),focus:function(){window.focus();$c();Gc();Wc()},setOption:function(a,b){var c=f[a];f[a]=b;if(a=="mode"||a=="indentUnit")yd();else if(a=="readOnly"&&b=="nocursor"){Hc();v.blur()}else if(a=="readOnly"&&!b){Zc(true)}else if(a=="theme")Bd();else if(a=="lineWrapping"&&c!=b)me(Ad)();else if(a=="tabSize")ed(true);else if(a=="keyMap")Cd();if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"||a=="lineNumberFormatter"){zd();ed(true)}},getOption:function(a){return f[a]},getMode:function(){return Fb},undo:me(Kc),redo:me(Lc),indentLine:me(function(a,b){if(typeof b!="string"){if(b==null)b=f.smartIndent?"smart":"prev";else b=b?"add":"subtract"}if(lc(a))xd(a,b)}),indentSelection:me(wd),historySize:function(){return{undo:gc.done.length,redo:gc.undone.length}},clearHistory:function(){gc=new T},setHistory:function(a){gc=new T;gc.done=a.done;gc.undone=a.undone},getHistory:function(){function a(a){for(var b=0,c=[],d;b<a.length;++b){c.push(d=[]);for(var e=0,f=a[b];e<f.length;++e){var g=[],h=f[e];d.push({start:h.start,added:h.added,old:g});for(var i=0;i<h.old.length;++i)g.push(G(h.old[i]))}}return c}return{done:a(gc.done),undone:a(gc.undone)}},matchBrackets:me(function(){de(true)}),getTokenAt:me(function(a){a=pd(a);return nc(a.line).getTokenAt(Fb,fe(a.line),f.tabSize,a.ch)}),getStateAfter:function(a){a=od(a==null?Gb.size-1:a);return fe(a+1)},cursorCoords:function(a,b){if(a==null)a=Jb.inverted;return this.charCoords(a?Jb.from:Jb.to,b)},charCoords:function(a,b){a=pd(a);if(b=="local")return Od(a,false);if(b=="div")return Od(a,true);return Qd(a)},coordsChar:function(a){var b=hb(X);return Pd(a.x-b.left,a.y-b.top)},markText:me(Ed),setBookmark:Fd,findMarksAt:Gd,setMarker:me(Hd),clearMarker:me(Id),setLineClass:me(Kd),hideLine:me(function(a){return Ld(a,true)}),showLine:me(function(a){return Ld(a,false)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!lc(a))return null;a=nc(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:Md,getViewport:function(){return{from:Zb,to:$b}},addWidget:function(a,b,c,d,e){a=Od(pd(a));var f=a.yBot,g=a.x;b.style.position="absolute";tb.appendChild(b);if(d=="over")f=a.y;else if(d=="near"){var h=Math.max(Ab.offsetHeight,Gb.height*Ud()),i=Math.max(tb.clientWidth,X.clientWidth)-Zd();if(a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight)f=a.y-b.offsetHeight;if(g+b.offsetWidth>i)g=i-b.offsetWidth}b.style.top=f+Yd()+"px";b.style.left=b.style.right="";if(e=="right"){g=tb.clientWidth-b.offsetWidth;b.style.right="0px"}else{if(e=="left")g=0;else if(e=="middle")g=(tb.clientWidth-b.offsetWidth)/2;b.style.left=g+Zd()+"px"}if(c)bd(g,f,g+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return Gb.size},clipPos:pd,getCursor:function(a){if(a==null)a=Jb.inverted;return pb(a?Jb.from:Jb.to)},somethingSelected:function(){return!nb(Jb.from,Jb.to)},setCursor:me(function(a,b,c){if(b==null&&typeof a.line=="number")nd(a.line,a.ch,c);else nd(a,b,c)}),setSelection:me(function(a,b,c){(c?kd:ld)(pd(a),pd(b||a))}),getLine:function(a){if(lc(a))return nc(a).text},getLineHandle:function(a){if(lc(a))return nc(a)},setLine:me(function(a,b){if(lc(a))Qc(b,{line:a,ch:0},{line:a,ch:nc(a).text.length})}),removeLine:me(function(a){if(lc(a))Qc("",{line:a,ch:0},pd({line:a+1,ch:0}))}),replaceRange:me(Qc),getRange:function(a,b,c){return Tc(pd(a),pd(b),c)},triggerOnKeyDown:me(Dc),execCommand:function(a){return i[a](mc)},moveH:me(rd),deleteH:me(sd),moveV:me(td),toggleOverwrite:function(){if(Pb){Pb=false;K.className=K.className.replace(" CodeMirror-overwrite","")}else{Pb=true;K.className+=" CodeMirror-overwrite"}},posFromIndex:function(a){var b=0,c;Gb.iter(0,Gb.size,function(d){var e=d.text.length+1;if(e>a){c=a;return true}a-=e;++b});return pd({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;Gb.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){if(a!=null)Ab.scrollLeft=a;if(b!=null)D.scrollTop=Ab.scrollTop=b;ed([])},getScrollInfo:function(){return{x:Ab.scrollLeft,y:D.scrollTop,height:D.scrollHeight,width:Ab.scrollWidth}},setSize:function(a,b){function c(a){a=String(a);return/^\d+$/.test(a)?a+"px":a}if(a!=null)Bb.style.width=c(a);if(b!=null)Ab.style.height=c(b);mc.refresh()},operation:function(a){return me(a)()},compoundChange:function(a){return ne(a)},refresh:function(){ed(true,null,Nb);if(D.scrollHeight>Nb)D.scrollTop=Nb},getInputField:function(){return v},getWrapperElement:function(){return Bb},getScrollerElement:function(){return Ab},getGutterElement:function(){return gb}};var zc;var Cc=null;var Xc="";Dd.prototype.clear=me(function(){var a=Infinity,b=-Infinity;for(var c=0;c<this.lines.length;++c){var d=this.lines[c];var e=C(d.markedSpans,this,true);if(e.from!=null||e.to!=null){var f=Q(d);a=Math.min(a,f);b=Math.max(b,f)}}if(a!=Infinity)Tb.push({from:a,to:b+1});this.lines.length=0});Dd.prototype.find=function(){var a,b;for(var c=0;c<this.lines.length;++c){var d=this.lines[c];var e=C(d.markedSpans,this);if(e.from!=null||e.to!=null){var f=Q(d);if(e.from!=null)a={line:f,ch:e.from};if(e.to!=null)b={line:f,ch:e.to}}}if(this.type=="bookmark")return a;return a&&{from:a,to:b}};var Rd,Sd,Td;var Vd,Wd=0;var _d;var ce={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};var le=0;for(var oe in g)if(g.propertyIsEnumerable(oe)&&!mc.propertyIsEnumerable(oe))mc[oe]=g[oe];return mc}function k(a){if(typeof a=="string")return j[a];else return a}function l(a,b,c,d,e){function f(b){b=k(b);var c=b[a];if(c===false){if(e)e();return true}if(c!=null&&d(c))return true;if(b.nofallthrough){if(e)e();return true}var g=b.fallthrough;if(g==null)return false;if(Object.prototype.toString.call(g)!="[object Array]")return f(g);for(var h=0,i=g.length;h<i;++h){if(f(g[h]))return true}return false}if(b&&f(b))return true;return f(c)}function m(a){var b=zb[_(a,"keyCode")];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function y(a,b){if(b===true)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];if(e instanceof Array)e=e.concat([]);c[d]=e}return c}function z(a,b,c){return a.startState?a.startState(b,c):true}function A(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function B(a,b,c){this.from=a;this.to=b;this.marker=c}function C(a,b,c){if(a)for(var d=0;d<a.length;++d){var e=a[d];if(e.marker==b){if(c)a.splice(d,1);return e}}}function D(a,b,c){if(a)for(var d=0,e;d<a.length;++d){var f=a[d],g=f.marker;var h=f.from==null||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||g.type=="bookmark"&&f.from==b&&f.from!=c){var i=f.to==null||(g.inclusiveRight?f.to>=b:f.to>b);(e||(e=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return e}function E(a,b){if(a)for(var c=0,d;c<a.length;++c){var e=a[c],f=e.marker;var g=e.to==null||(f.inclusiveRight?e.to>=b:e.to>b);if(g||f.type=="bookmark"&&e.from==b){var h=e.from==null||(f.inclusiveLeft?e.from<=b:e.from<b);(d||(d=[])).push({from:h?null:e.from-b,to:e.to==null?null:e.to-b,marker:f})}}return d}function F(a,b,c,d,e){if(!a&&!b)return e;var f=D(a,c);var g=E(b,d);var h=e.length==1,i=lb(e).length+(h?c:0);if(f){for(var j=0;j<f.length;++j){var k=f[j];if(k.to==null){var l=C(g,k.marker);if(!l)k.to=c;else if(h)k.to=l.to==null?null:l.to+i}}}if(g){for(var j=0;j<g.length;++j){var k=g[j];if(k.to!=null)k.to+=i;if(k.from==null){var l=C(f,k.marker);if(!l){k.from=i;if(h)(f||(f=[])).push(k)}}else{k.from+=i;if(h)(f||(f=[])).push(k)}}}var m=[I(e[0],f)];if(!h){var n=e.length-2,o;if(n>0&&f)for(var j=0;j<f.length;++j)if(f[j].to==null)(o||(o=[])).push({from:null,to:null,marker:f[j].marker});for(var j=0;j<n;++j)m.push(I(e[j+1],o));m.push(I(lb(e),g))}return m}function G(a){return typeof a=="string"?a:a.text}function H(a){return typeof a=="string"?null:a.markedSpans}function I(a,b){return b?{text:a,markedSpans:b}:a}function J(a){var b=a.markedSpans;if(!b)return;for(var c=0;c<b.length;++c){var d=b[c].marker.lines;var e=vb(d,a);d.splice(e,1)}a.markedSpans=null}function K(a,b){if(!b)return;for(var c=0;c<b.length;++c)var d=b[c].marker.lines.push(a);a.markedSpans=b}function M(a,b){this.text=a;this.height=1;K(this,b)}function N(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b){a[b].parent=this;d+=a[b].height}this.height=d}function O(a){this.children=a;var b=0,c=0;for(var d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize();c+=f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function P(a,b){while(!a.lines){for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}}return a.lines[b]}function Q(a){if(a.parent==null)return null;var b=a.parent,c=vb(b.lines,a);for(var d=b.parent;d;b=d,d=d.parent){for(var e=0,f=d.children.length;;++e){if(d.children[e]==b)break;c+=d.children[e].chunkSize()}}return c}function R(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g;c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function S(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.chunkSize();if(b<g){a=f;continue a}b-=g;c+=f.height}return c}while(!a.lines);for(var d=0;d<b;++d)c+=a.lines[d].height;return c}function T(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}function U(){Y(this)}function V(a){if(!a.stop)a.stop=U;return a}function W(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false}function X(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true}function Y(a){W(a);X(a)}function Z(a){return a.target||a.srcElement}function $(a){var b=a.which;if(b==null){if(a.button&1)b=1;else if(a.button&2)b=3;else if(a.button&4)b=2}if(c&&a.ctrlKey&&b==1)b=3;return b}function _(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function ab(a,b,c,d){if(typeof a.addEventListener=="function"){a.addEventListener(b,c,false);if(d)return function(){a.removeEventListener(b,c,false)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function bb(){this.id=null}function gb(a,b,c){if(b==null){b=a.search(/[^\s\u00a0]/);if(b==-1)b=a.length}for(var d=0,e=0;d<b;++d){if(a.charAt(d)=="	")e+=c-e%c;else++e}return e}function hb(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b){if(window.pageYOffset==null){var e=document.documentElement||document.body.parentNode;if(e.scrollTop==null)e=document.body;c.top+=e.scrollTop;c.left+=e.scrollLeft}else{c.top+=window.pageYOffset;c.left+=window.pageXOffset}}return c}function ib(a){return a.textContent||a.innerText||a.nodeValue||""}function kb(a){while(jb.length<=a)jb.push(lb(jb)+" ");return jb[a]}function lb(a){return a[a.length-1]}function mb(a){if(b){a.selectionStart=0;a.selectionEnd=a.value.length}else a.select()}function nb(a,b){return a.line==b.line&&a.ch==b.ch}function ob(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function pb(a){return{line:a.line,ch:a.ch}}function qb(a,b,c,d){var e=document.createElement(a);if(c)e.className=c;if(d)e.style.cssText=d;if(typeof b=="string")tb(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function rb(a){a.innerHTML="";return a}function sb(a,b){rb(a).appendChild(b)}function tb(a,b){if(q){a.innerHTML="";a.appendChild(document.createTextNode(b))}else a.textContent=b}function ub(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0;--c,--d)if(a.charAt(c)!=b.charAt(d))break;return d+1}function vb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function wb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}"use strict";a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var b=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var c=b||/Mac/.test(navigator.platform);var d=/Win/.test(navigator.platform);var e=a.modes={},f=a.mimeModes={};a.defineMode=function(b,c){if(!a.defaults.mode&&b!="null")a.defaults.mode=b;if(arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}e[b]=c};a.defineMIME=function(a,b){f[a]=b};a.resolveMode=function(b){if(typeof b=="string"&&f.hasOwnProperty(b))b=f[b];else if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");if(typeof b=="string")return{name:b};else return b||{name:"null"}};a.getMode=function(b,c){var c=a.resolveMode(c);var d=e[c.name];if(!d)return a.getMode(b,"text/plain");var f=d(b,c);if(h.hasOwnProperty(c.name)){var g=h[c.name];for(var i in g)if(g.hasOwnProperty(i))f[i]=g[i]}f.name=c.name;return f};a.listModes=function(){var a=[];for(var b in e)if(e.propertyIsEnumerable(b))a.push(b);return a};a.listMIMEs=function(){var a=[];for(var b in f)if(f.propertyIsEnumerable(b))a.push({mime:b,mode:f[b]});return a};var g=a.extensions={};a.defineExtension=function(a,b){g[a]=b};var h=a.modeExtensions={};a.extendMode=function(a,b){var c=h.hasOwnProperty(a)?h[a]:h[a]={};for(var d in b)if(b.hasOwnProperty(d))c[d]=b[d]};var i=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(true),c=a.getCursor(false),d=!nb(b,c);if(!d&&a.getLine(b.line).length==b.ch)a.replaceRange("",b,{line:b.line+1,ch:0});else a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,true)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,true)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,true)},goLineStartSmart:function(a){var b=a.getCursor();var c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,true)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,true)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end")},defaultTab:function(a){if(a.somethingSelected())a.indentSelection("add");else a.replaceSelection("	","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);if(b.ch>0&&b.ch<c.length-1)a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}};var j=a.keyMap={};j.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};j.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};j.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};j["default"]=c?j.macDefault:j.pcDefault;j.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};a.fromTextArea=function(b,c){function f(){b.value=i.getValue()}if(!c)c={};c.value=b.value;if(!c.tabindex&&b.tabindex)c.tabindex=b.tabindex;if(c.autofocus==null){var d=document.body;try{d=document.activeElement}catch(e){}c.autofocus=d==b||b.getAttribute("autofocus")!=null&&d==document.body}if(b.form){var g=ab(b.form,"submit",f,true);if(typeof b.form.submit=="function"){var h=b.form.submit;b.form.submit=function j(){f();b.form.submit=h;b.form.submit();b.form.submit=j}}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);i.save=f;i.getTextArea=function(){return b};i.toTextArea=function(){f();b.parentNode.removeChild(i.getWrapperElement());b.style.display="";if(b.form){g();if(typeof b.form.submit=="function")b.form.submit=h}};return i};var n=/gecko\/\d{7}/i.test(navigator.userAgent);var o=/MSIE \d/.test(navigator.userAgent);var p=/MSIE [1-7]\b/.test(navigator.userAgent);var q=/MSIE [1-8]\b/.test(navigator.userAgent);var r=o&&document.documentMode==5;var s=/WebKit\//.test(navigator.userAgent);var t=/Chrome\//.test(navigator.userAgent);var u=/Opera\//.test(navigator.userAgent);var v=/Apple Computer/.test(navigator.vendor);var w=/KHTML\//.test(navigator.userAgent);var x=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);a.copyState=y;a.startState=z;a.innerMode=function(a,b){while(a.innerMode){var c=a.innerMode(b);b=c.state;a=c.mode}return c||{mode:a,state:b}};A.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string")var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c){++this.pos;return b}},eatWhile:function(a){var b=this.pos;while(this.eat(a)){}return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1){this.pos=b;return true}},backUp:function(a){this.pos-=a},column:function(){return gb(this.string,this.start,this.tabSize)},indentation:function(){return gb(this.string,null,this.tabSize)},match:function(a,b,c){if(typeof a=="string"){var d=function(a){return c?a.toLowerCase():a};if(d(this.string).indexOf(d(a),this.pos)==this.pos){if(b!==false)this.pos+=a.length;return true}}else{var e=this.string.slice(this.pos).match(a);if(e&&e.index>0)return null;if(e&&b!==false)this.pos+=e[0].length;return e}},current:function(){return this.string.slice(this.start,this.pos)}};a.StringStream=A;var L=" ";if(n||o&&!p)L="​";else if(u)L="";M.prototype={update:function(a,b){this.text=a;this.stateAfter=this.styles=null;J(this);K(this,b)},highlight:function(a,b,c){var d=new A(this.text,c),e=this.styles||(this.styles=[]);var f=e.length=0;if(this.text==""&&a.blankLine)a.blankLine(b);while(!d.eol()){var g=a.token(d,b),h=d.current();d.start=d.pos;if(f&&e[f-1]==g){e[f-2]+=h}else if(h){e[f++]=h;e[f++]=g}if(d.pos>5e3){e[f++]=this.text.slice(d.pos);e[f++]=null;break}}},process:function(a,b,c){var d=new A(this.text,c);if(this.text==""&&a.blankLine)a.blankLine(b);while(!d.eol()&&d.pos<=5e3){a.token(d,b);d.start=d.pos}},getTokenAt:function(a,b,c,d){var e=this.text,f=new A(e,c);while(f.pos<d&&!f.eol()){f.start=f.pos;var g=a.token(f,b)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,state:b}},indentation:function(a){return gb(this.text,null,a)},getContent:function(a,b,c){function h(b,c,g){if(!c)return;if(d&&o&&c.charAt(0)==" ")c=" "+c.slice(1);d=false;if(!f.test(c)){e+=c.length;var h=document.createTextNode(c)}else{var h=document.createDocumentFragment(),i=0;while(true){f.lastIndex=i;var j=f.exec(c);var k=j?j.index-i:c.length-i;if(k){h.appendChild(document.createTextNode(c.slice(i,i+k)));e+=k}if(!j)break;i+=k+1;if(j[0]=="	"){var l=a-e%a;h.appendChild(qb("span",kb(l),"cm-tab"));e+=l}else{var m=qb("span","•","cm-invalidchar");m.title="\\u"+j[0].charCodeAt(0).toString(16);h.appendChild(m);e+=1}}}if(g)b.appendChild(qb("span",[h],g));else b.appendChild(h)}function q(a){if(!a)return null;return"cm-"+a.replace(/ +/g," cm-")}var d=true,e=0,f=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;var g=qb("pre");var i=h;if(b!=null){var j=0,k=g.anchor=qb("span");i=function(a,d,e){var f=d.length;if(b>=j&&b<j+f){if(b>j){h(a,d.slice(0,b-j),e);if(c)a.appendChild(qb("wbr"))}a.appendChild(k);var g=b-j;h(k,u?d.slice(g,g+1):d.slice(g),e);if(u)h(a,d.slice(g+1),e);b--;j+=f}else{j+=f;h(a,d,e);if(j==b&&j==p){tb(k,L);a.appendChild(k)}else if(j>b+10&&/\s/.test(d))i=function(){}}}}var l=this.styles,m=this.text,n=this.markedSpans;var p=m.length;if(!m&&b==null){i(g," ")}else if(!n||!n.length){for(var r=0,s=0;s<p;r+=2){var t=l[r],v=l[r+1],w=t.length;if(s+w>p)t=t.slice(0,p-s);s+=w;i(g,t,q(v))}}else{n.sort(function(a,b){return a.from-b.from});var x=0,r=0,y="",v,z=0;var A=n[0].from||0,B=[],C=0;var D=function(){var a;while(C<n.length&&((a=n[C]).from==x||a.from==null)){if(a.marker.type=="range")B.push(a);++C}A=C<n.length?n[C].from:Infinity;for(var b=0;b<B.length;++b){var c=B[b].to;if(c==null)c=Infinity;if(c==x)B.splice(b--,1);else A=Math.min(c,A)}};var E=0;while(x<p){if(A==x)D();var F=Math.min(p,A);while(true){if(y){var G=x+y.length;var H=v;for(var I=0;I<B.length;++I){var J=B[I];H=(H?H+" ":"")+J.marker.style;if(J.marker.endStyle&&J.to===Math.min(G,F))H+=" "+J.marker.endStyle;if(J.marker.startStyle&&J.from===x)H+=" "+J.marker.startStyle}i(g,G>F?y.slice(0,F-x):y,H);if(G>=F){y=y.slice(F-x);x=F;break}x=G}y=l[r++];v=q(l[r++])}}}return g},cleanUp:function(){this.parent=null;J(this)}};N.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height;f.cleanUp();if(f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return true}};O.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;e.remove(a,g,c);this.height-=h-e.height;if(f==g){this.children.splice(d--,1);e.parent=null}if((b-=g)==0)break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i);this.children=[new N(i)];this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){var c=0;for(var d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&f.lines.length>50){while(f.lines.length>50){var h=f.lines.splice(f.lines.length-25,25);var i=new N(h);f.height-=i.height;this.children.splice(d+1,0,i);i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(this.children.length<=10)return;var a=this;do{var b=a.children.splice(a.children.length-5,5);var c=new O(b);if(!a.parent){var d=new O(a.children);d.parent=a;a.children=[d,c];a=d}else{a.size-=c.size;a.height-=c.height;var e=vb(a.parent.children,a);a.parent.children.splice(e+1,0,c)}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return true;if((b-=h)==0)break;a=0}else a-=g}}};T.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+(new Date),e=lb(this.done),f=e&&lb(e);var g=d-this.time;if(this.compound&&e&&!this.closed){e.push({start:a,added:b,old:c})}else if(g>400||!f||this.closed||f.start>a+c.length||f.start+f.added<a){this.done.push([{start:a,added:b,old:c}]);this.closed=false}else{var h=Math.max(0,f.start-a),i=Math.max(0,a+c.length-(f.start+f.added));for(var j=h;j>0;--j)f.old.unshift(c[j-1]);for(var j=i;j>0;--j)f.old.push(c[c.length-j]);if(h)f.start=a;f.added+=b-(c.length-h-i)}this.time=d},startCompound:function(){if(!(this.compound++))this.closed=true},endCompound:function(){if(!--this.compound)this.closed=true}};a.e_stop=Y;a.e_preventDefault=W;a.e_stopPropagation=X;a.connect=ab;bb.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var cb=a.Pass={toString:function(){return"CodeMirror.Pass"}};var db=function(){if(q)return false;var a=qb("div");return"draggable"in a||"dragDrop"in a}();var eb=function(){var a=qb("textarea");a.value="foo\nbar";if(a.value.indexOf("\r")>-1)return"\r\n";return"\n"}();var fb=/^$/;if(n)fb=/$'/;else if(v)fb=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/;else if(t)fb=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/;var jb=[""];var xb="\n\nb".split(/\n/).length!=3?function(a){var b=0,c=[],d=a.length;while(b<=d){var e=a.indexOf("\n",b);if(e==-1)e=a.length;var f=a.slice(b,a.charAt(e-1)=="\r"?e-1:e);var g=f.indexOf("\r");if(g!=-1){c.push(f.slice(0,g));b+=g+1}else{c.push(f);b=e+1}}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=xb;var yb=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return false}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}if(!b||b.parentElement()!=a)return false;return b.compareEndPoints("StartToEnd",b)!=0};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var zb={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=zb;(function(){for(var a=0;a<10;a++)zb[a+48]=String(a);for(var a=65;a<=90;a++)zb[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)zb[a+111]=zb[a+63235]="F"+a})();a.version="2.34";return a}()